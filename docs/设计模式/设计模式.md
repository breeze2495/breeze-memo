## P1: å®šä¹‰

* è®¾è®¡æ¨¡å¼ä»£è¡¨äº†æœ€ä½³å®è·µã€‚æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚

* **ç›®çš„ï¼š**
    * ä»£ç é‡ç”¨æ€§ï¼šç›¸åŒçš„ä»£ç ä¸éœ€è¦å¤šæ¬¡ç¼–å†™ï¼›
    * å¯è¯»æ€§ï¼šç¼–ç¨‹è§„èŒƒæ€§ï¼Œä¾¿äºå…¶ä»–ç¨‹åºå‘˜é˜…è¯»å’Œç†è§£ï¼›
    * å¯æ‰©å±•æ€§ï¼šéœ€è¦å¢åŠ æ–°çš„åŠŸèƒ½éå¸¸çš„æ–¹ä¾¿ï¼Œåˆç§°ä¸ºå¯ç»´æŠ¤æ€§ï¼›
    * å¯é æ€§ï¼šæ–°å¢åŠ çš„åŠŸèƒ½å¯¹åŸæ¥çš„åŠŸèƒ½æ²¡æœ‰å½±å“ï¼›
    * ä½¿ç¨‹åºå‘ˆç°é«˜å†…èšï¼Œä½è€¦åˆçš„ç‰¹æ€§ï¼›

## P2: è®¾è®¡æ¨¡å¼å¸¸ç”¨çš„ä¸ƒå¤§åŸåˆ™

* å•ä¸€èŒè´£åŸåˆ™ï¼›
* æ¥å£éš”ç¦»åŸåˆ™ï¼›
* ä¾èµ–å€’è½¬åŸåˆ™ï¼›
* é‡Œæ°æ›¿æ¢åŸåˆ™ï¼›
* å¼€é—­åŸåˆ™ï¼›
* è¿ªç±³ç‰¹æ³•åˆ™ï¼›
* åˆæˆå¤ç”¨åŸåˆ™ï¼›

---

### p1: å•ä¸€èŒè´£åŸåˆ™

* æ¦‚å¿µï¼šå¯¹ç±»æ¥è¯´ï¼Œä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚å¦‚æœç±»Aè´Ÿè´£äº†ä¸¤ä¸ªä¸åŒçš„èŒè´£ï¼ŒèŒè´£1ï¼ŒèŒè´£2ï¼Œå½“èŒè´£1éœ€æ±‚å˜æ›´å½±å“äº†èŒè´£2æ—¶ï¼Œåº”å°†Açš„ç²’åº¦åˆ†è§£ä¸ºA1,A2ã€‚

---

### p2: æ¥å£éš”ç¦»åŸåˆ™

* æ¦‚å¿µï¼šä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Š
* æ”¹è¿›å‰
  * <img src="/Users/breeze/Library/Application Support/typora-user-images/image-20210507194207316.png" alt="image-20210507194207316" style="zoom:50%;float:Left" />
* æ”¹è¿›å
  * <img src="/Users/breeze/Library/Application Support/typora-user-images/image-20210507194234437.png" alt="image-20210507194234437" style="zoom:50%;float:left" />


---

### p3: ä¾èµ–å€’è½¬åŸåˆ™

* æ¦‚å¿µï¼š
    * é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–åº•å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼›
    * æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ï¼›
    * ä¾èµ–å€’è½¬çš„ä¸­å¿ƒæ€æƒ³æ˜¯ï¼šé¢å‘æ¥å£ç¼–ç¨‹ï¼›
    * ä¾èµ–å€’è½¬åŸåˆ™åŸºäºè¿™æ ·çš„è®¾è®¡ç†å¿µï¼šç›¸å¯¹äºç»†èŠ‚çš„å¤šå˜æ€§ï¼ŒæŠ½è±¡çš„ä¸œè¥¿è¦ç¨³å®šçš„å¤šã€‚

ä»¥æŠ½è±¡ä¸ºåŸºç¡€æ­å»ºçš„æ¶æ„æ¯”ä»¥ç»†èŠ‚ä¸ºåŸºç¡€çš„æ¶æ„è¦ç¨³å®šçš„å¤šã€‚javaä¸­ï¼ŒæŠ½è±¡æ˜¯æŒ‡æ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œç»†èŠ‚æ˜¯æŒ‡å…·ä½“çš„å®ç°ç±»ï¼›

* ä½¿ç”¨æ¥å£æˆ–æŠ½è±¡ç±»çš„ç›®çš„æ˜¯åˆ¶å®šå¥½è§„èŒƒï¼Œä¸æ¶‰åŠä»»ä½•å…·ä½“çš„æ“ä½œï¼ŒæŠŠå…·ä½“çš„ç»†èŠ‚äº¤ç»™ä»–ä»¬å…·ä½“çš„å®ç°ç±»æ¥å®Œæˆï¼›
    * æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚ï¼š
        * ä½å±‚æ¨¡å—å°½é‡éƒ½è¦æœ‰æŠ½è±¡ç±»æˆ–æ¥å£ï¼Œæˆ–è€…ä¸¤è€…éƒ½æœ‰ï¼Œç¨‹åºç¨³å®šæ€§æ›´å¥½ï¼›
        * å˜é‡çš„å£°æ˜ç±»å‹å°½é‡æ˜¯æŠ½è±¡ç±»æˆ–æ¥å£ï¼Œè¿™æ ·æˆ‘ä»¬çš„å˜é‡å¼•ç”¨å’Œå®é™…å¯¹è±¡é—´ï¼Œå°±å­˜åœ¨ä¸€ä¸ªç¼“å†²å±‚ï¼Œåˆ©äºç¨‹åºæ‰©å±•å’Œä¼˜åŒ–ï¼›
        * ç»§æ‰¿æ—¶éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ï¼›

```java
ä¾èµ–å…³ç³»ä¼ é€’çš„ä¸‰ç§æ–¹å¼ï¼š
  1.æ¥å£ä¼ é€’
  2.æ„é€ æ–¹æ³•ä¼ é€’
  3.setteræ–¹æ³•ä¼ é€’

æ–¹å¼1ï¼šé€šè¿‡æ¥å£ä¼ é€’å®ç°ä¾èµ–ï¼›
class Test{
   public class void main(String args[]){
     ITV pandaTV = new pandaTV();
     IOpenAndClose openAndClose = new OpenAndClose();
     openAndClose.open(pandaTV);
   }
}
interface IOpenAndClose{
   public void open(ITV tv);
}
interface ITV {
    public void play();
}
class PandaTV implements ITV{
     @Override
     public void play(){
        System.out.println("æ‰“å¼€ç†ŠçŒ«ç”µè§†æœº");
     }
}
class OpenAndClose{
    @Override
    public void open(ITV tv){
      tv.play();
    }
}
æ–¹å¼äºŒï¼šæ„é€ æ–¹æ³•ä¼ é€’ï¼š
class Test{
   public class void main(String args[]){
     ITV pandaTV = new pandaTV();
     IOpenAndClose openAndClose = new OpenAndClose(pandaTV);
     openAndClose.open();
   }
}
interface IOpenAndClose{
   public void open(ITV tv);
}

interface ITV {
    public void play();
}

class PandaTV implements ITV{
     @Override
     public void play(){
        System.out.println("æ‰“å¼€ç†ŠçŒ«ç”µè§†æœº");
     }
}

class OpenAndClose{
    private ITV tv;
    
    @Override
    public void OpenAndClose(ITV tv){
      this.tv = tv;
    }
      
    @Override
    public void open(){
      this.tv.play();
    }  
}  

æ–¹å¼ä¸‰ï¼šsetteræ–¹æ³•ä¼ é€’ï¼š
class Test{
   public class void main(String args[]){
     ITV pandaTV = new pandaTV();
     IOpenAndClose openAndClose = new OpenAndClose();
     openAndClose.set(pandaTV);
     openAndClose.open();
   }
}
interface IOpenAndClose{
   public void open(ITV tv);
   
   public void set(ITV tv);
}

interface ITV {
    public void play();
}

class PandaTV implements ITV{
     @Override
     public void play(){
        System.out.println("æ‰“å¼€ç†ŠçŒ«ç”µè§†æœº");
     }
}

class OpenAndClose{
    private ITV tv;
     
    @Override
    public void set(ITV tv){
      this.tv = tv;
    }
    @Override
    public void open(){
      this.tv.play();
    }  
}  
```

---

### p4: é‡Œæ°æ›¿æ¢åŸåˆ™

- **æ ¸å¿ƒ:**
  - å­ç±»å°½é‡ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•

* **å¼•å…¥ï¼š**
    * **å…³äºç»§æ‰¿çš„æ€è€ƒï¼š**
        * ç»§æ‰¿åŒ…å«è¿™æ ·ä¸€å±‚å«ä¹‰ï¼šçˆ¶ç±»ä¸­å®ç°çš„æ–¹æ³•ï¼Œå®é™…æ˜¯åœ¨è®¾å®šè§„èŒƒï¼Œè™½ç„¶å®ƒä¸å¼ºåˆ¶æ‰€æœ‰çš„å­ç±»å¿…é¡»éµå¾ªè¿™äº›è§„èŒƒï¼Œä½†å¦‚æœå­ç±»å¯¹è¿™äº›å·²ç»å®ç°çš„æ–¹æ³•è¿›è¡Œä»»æ„ä¿®æ”¹ï¼Œå°±ä¼šå¯¹æ•´ä¸ªç»§æ‰¿ä½“ç³»é€ æˆç ´åï¼›
        * ç»§æ‰¿åœ¨ç»™ç¨‹åºè®¾è®¡å¸¦æ¥ä¾¿åˆ©çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†å¼Šç«¯ã€‚ç»§æ‰¿ä¼šä½¿ç¨‹åºå¯ç§»æ¤æ€§é™ä½ï¼Œå¢åŠ å¯¹è±¡é—´çš„è€¦åˆã€‚å¦‚æœä¸€ä¸ªç±»è¢«å…¶ä»–çš„ç±»æ‰€ç»§æ‰¿ï¼Œåœ¨å¯¹å…¶ä¿®æ”¹æ—¶ï¼Œå¿…é¡»è€ƒè™‘åˆ°æ‰€æœ‰çš„å­ç±»ï¼Œå¹¶ä¸”çˆ¶ç±»ä¿®æ”¹åï¼Œæ‰€æœ‰æ¶‰åŠçš„å­ç±»éƒ½æœ‰å¯èƒ½äº§ç”Ÿæ•…éšœã€‚
        * å¦‚ä½•æ­£ç¡®å¾—ä½¿ç”¨ç»§æ‰¿ï¼Ÿ==>   é‡Œæ°æ›¿æ¢åŸåˆ™ï¼›
* **æ¦‚å¿µï¼š**
    * å¦‚æœå¯¹æ¯ä¸ªç±»å‹ä¸ºT1çš„å¯¹è±¡o1ï¼Œéƒ½æœ‰ç±»å‹ä¸ºT2çš„å¯¹è±¡o2ï¼Œä½¿å¾—ä»¥T1å®šä¹‰çš„æ‰€æœ‰ç¨‹åºPåœ¨æ‰€æœ‰å¯¹è±¡o1éƒ½ä»£æ¢æˆo2æ—¶ï¼Œç¨‹åºPçš„è¡Œä¸ºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç±»å‹T2æ˜¯ç±»å‹T1çš„å­ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½æ˜åœ°ä½¿ç”¨å…¶å­ç±»å¯¹è±¡ã€‚
    * æ›´é€šä¿—çš„è®²ï¼š**å­ç±»å°½é‡ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•**ï¼›
    * é‡Œæ°æ›¿æ¢åŸåˆ™å‘Šè¯‰æˆ‘ä»¬ï¼Œç»§æ‰¿å®é™…ä¸Šä¸Šä¸¤ä¸ªç±»è€¦åˆæ€§å¢å¼ºäº†ï¼Œåœ¨é€‚å½“çš„æƒ…å†µä¸‹ï¼Œè®²åŸæ¥çš„çˆ¶ç±»å’Œå­ç±»ç»§æ‰¿ä¸€ä¸ªæ›´é€šä¿—çš„åŸºç±»ï¼Œå†é€šè¿‡**èšåˆï¼Œç»„åˆï¼Œä¾èµ–**æ¥è§£å†³é—®é¢˜ï¼›

---

### p5: å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰

* **æ¦‚å¿µï¼š**
    * å¼€é—­åŸåˆ™æ˜¯ç¼–ç¨‹ä¸­æœ€åŸºç¡€ï¼Œæœ€é‡è¦çš„è®¾è®¡åŸåˆ™;
    * ä¸€ä¸ªè½¯ä»¶å®ä½“ å¦‚ï¼šç±»ï¼Œæ¨¡å—å’Œå‡½æ•° åº”è¯¥å¯¹**æ‰©å±•å¼€æ”¾**ï¼ˆå¯¹æä¾›æ–¹ï¼‰ï¼Œ**å¯¹ä¿®æ”¹å…³é—­**ï¼ˆå¯¹ä½¿ç”¨æ–¹ï¼‰ã€‚ç”¨æŠ½è±¡æ„å»ºæ¡†æ¶ï¼Œç”¨å®ç°æ‰©å±•ç»†èŠ‚ã€‚
    * é€šä¿—çš„è®²ï¼Œåœ¨è½¯ä»¶éœ€æ±‚å˜åŒ–æ—¶ï¼Œå°½é‡é€šè¿‡æ‰©å±•è½¯ä»¶å®ä½“çš„è¡Œä¸ºæ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰ä»£ç æ¥å®ç°å˜åŒ–ï¼›
    * ä½¿ç”¨è®¾è®¡æ¨¡å¼çš„ç›®çš„å°±æ˜¯éµå¾ªå¼€é—­åŸåˆ™ï¼›

```java
--æ”¹è¿›å‰ï¼š   
//åŸå…ˆæœ‰çŸ©å½¢å’Œåœ†å½¢ï¼Œè¦å¢åŠ åœ†å½¢éœ€è¦åœ¨GraphiEditorä¸­æ–°å¢åŠ ä¸‰è§’å½¢çš„ä»£ç ï¼Œè¿˜éœ€è¦å¢åŠ ä¸‰è§’å½¢çš„ç±»
class Test{
  public void main(String args[]){
    GraphiEditor g  = new GraphiEditor();
    g.drawShape(new Rectangle());
    g.drawShape(new Triangle());
  }
}
//[ä½¿ç”¨æ–¹]
class GraphiEditor{
  public void drawShape(Shape s){
    public void drawShape(Shape s){
      if(s.m_type == 1){
        drawRectangle(s);
      }else if(s.m_type == 2){
        drawCircle(s);
      }
    }
  }
  public void drawRectangle(){
    system.out.println("ç»˜åˆ¶çŸ©å½¢")
  }  
  
  public void drawCircle(){
    system.out.println("ç»˜åˆ¶åœ†å½¢")
  } 

}
class Shape{
  int m_type;
}
class Rectangle extends Shape{
  Rectangle(){
    super.m_type = 1;
  }
}
class Circle extends Shape{
  Circle(){
    super.m_type = 2;
  }
  
---æ”¹è¿›å---------------
//[ä½¿ç”¨æ–¹]
class GraphiEditor{
    public void drawShape(Shape s){      
      s.draw();
    }
}
abstract class Shape{
  int m_type;
  
  public abstract void draw();
}

class Rectangle extends Shape{
  Rectangle(){
    super.m_type = 1;
  }
  
  @Override
  public void draw(){
    System.out.println("ç»˜åˆ¶çŸ©å½¢")
  }
}

class Circle extends Shape{
  Circle(){
    super.m_type = 2;
  }
  
  @Override
  public void draw(){
    System.out.println("ç»˜åˆ¶åœ†å½¢")ï¼›
}
```


---

### p6: è¿ªç±³ç‰¹æ³•åˆ™

- æ ¸å¿ƒï¼šé™ä½ç±»ä¹‹é—´çš„è€¦åˆ

* æ¦‚å¿µï¼š
    * ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£;
    * ç±»ä¸ç±»å…³ç³»è¶Šå¯†åˆ‡ï¼Œè€¦åˆåº¦è¶Šå¤§ï¼›
    * è¿ªç±³ç‰¹æ³•åˆ™åˆå«**æœ€å°‘çŸ¥é“åŸåˆ™**ï¼Œå³ä¸€ä¸ªç±»å¯¹è‡ªå·±ä¾èµ–çš„ç±»çŸ¥é“çš„è¶Šå°‘è¶Šå¥½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºè¢«ä¾èµ–çš„ç±»ä¸ç®¡å¤šä¹ˆå¤æ‚ï¼Œéƒ½å°½é‡å°†é€»è¾‘å°è£…åœ¨ç±»çš„å†…éƒ¨ã€‚å¯¹å¤–é™¤äº†æä¾›çš„publicæ–¹æ³•ï¼Œä¸å¯¹å¤–æ³„éœ²ä»»ä½•ä¿¡æ¯ï¼›
    * æ›´ç®€å•çš„å®šä¹‰ï¼šåªä¸ç›´æ¥çš„æœ‹å‹è¿›è¡Œé€šä¿¡
        * **ç›´æ¥çš„æœ‹å‹ï¼š**æ¯ä¸ªå¯¹è±¡éƒ½ä¼šä¸å…¶ä»–å¯¹è±¡æœ‰è€¦åˆå…³ç³»ï¼Œåªè¦ä¸¤ä¸ªå¯¹è±¡é—´æœ‰è€¦åˆå…³ç³»ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æ˜¯æœ‹å‹å…³ç³»ã€‚è€¦åˆçš„æ–¹å¼å¾ˆå¤šï¼Œä¾èµ–ï¼Œå…³è”ï¼Œç»„åˆï¼Œèšåˆç­‰ã€‚å…¶ä¸­ï¼Œæˆ‘ä»¬ç§°å‡ºç°æˆå‘˜å˜é‡ï¼Œæ–¹æ³•å‚æ•°ï¼Œæ–¹æ³•è¿”å›å€¼ä¸­çš„ç±»ä¸ºç›´æ¥æœ‹å‹ã€‚è€Œå‡ºç°åœ¨å±€éƒ¨å˜é‡ä¸­çš„ç±»ä¸æ˜¯ç›´æ¥çš„æœ‹å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé™Œç”Ÿçš„ç±»æœ€å¥½ä¸è¦ä»¥å±€éƒ¨å˜é‡çš„å½¢å¼å‡ºç°åœ¨ç±»çš„å†…éƒ¨ã€‚

---

### p7: åˆæˆå¤ç”¨åŸåˆ™

* æ¦‚å¿µï¼š
    * å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ï¼›

<img src="/Users/breeze/Library/Application Support/typora-user-images/image-20210507194923482.png" alt="image-20210507194923482" style="zoom:50%;float:left" />


---

## P3: è®¾è®¡åŸåˆ™æ ¸å¿ƒæ€æƒ³

* æ‰¾å‡ºåº”ç”¨ä¸­å¯èƒ½éœ€è¦å˜åŒ–ä¹‹å¤„ï¼Œå°†å…¶ç‹¬ç«‹å‡ºæ¥ï¼Œä¸è¦å’Œé‚£äº›ä¸éœ€è¦å˜åŒ–çš„ä»£ç æ··åœ¨ä¸€èµ·ï¼›
* é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é’ˆå¯¹å®ç°ç¼–ç¨‹ï¼›
* ä¸ºäº†äº¤äº’å¯¹è±¡ä¹‹é—´çš„æ¾è€¦åˆè®¾è®¡è€ŒåŠªåŠ›ï¼›

---

## P4: è®¾è®¡æ¨¡å¼åˆ†ç±»

<img src="/Users/breeze/Library/Application Support/typora-user-images/image-20210507195000419.png" alt="image-20210507195000419" style="zoom:50%;" />


---

## P5: UMLç±»å›¾

- Unified modeling language ç»Ÿä¸€å»ºæ¨¡è¯­è¨€

<img src="/Users/breeze/Library/Application Support/typora-user-images/image-20210507195017390.png" alt="image-20210507195017390" style="zoom:50%;" />

* ç”»UMLå›¾ä¸æ–‡ç« å·®ä¸å¤šï¼Œéƒ½æ˜¯æŠŠè‡ªå·±çš„æ€æƒ³æè¿°ç»™åˆ«äººçœ‹ï¼Œå…³é”®åœ¨äºæ€è·¯å’Œæ¡ç†ï¼›
* UMLå›¾åˆ†ç±»ï¼š
    * ç”¨ä¾‹å›¾ï¼š
    * é™æ€ç»“æ„å›¾ï¼š**ç±»å›¾ï¼ˆæœ€æ ¸å¿ƒï¼Œå…³ç³»è§ä¸Šå›¾ï¼‰**ï¼Œå¯¹è±¡å›¾ï¼ŒåŒ…å›¾ï¼Œç»„ä»¶å›¾ï¼Œéƒ¨ç½²å›¾
    * åŠ¨æ€è¡Œä¸ºå›¾ï¼šäº¤äº’å›¾ï¼ŒçŠ¶æ€å›¾ï¼Œæ´»åŠ¨å›¾
* **ç±»å›¾çš„å…³ç³»ï¼š**
    * ä¾èµ–å…³ç³»ï¼š
        * ç±»çš„æˆå‘˜å˜é‡
        * æ–¹æ³•çš„è¿”å›ç±»å‹
        * æ–¹æ³•æ¥æ”¶çš„å‚æ•°leixing
        * æ–¹æ³•ä¸­ä½¿ç”¨åˆ°äº†
    * æ³›åŒ–å…³ç³»ï¼š
      
        * å®é™…ä¸Šå°±æ˜¯ç»§æ‰¿å…³ç³»ï¼Œå®ƒæ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹
    * å®ç°å…³ç³»ï¼š
      
        * å®ç°æ¥å£
    * å…³è”å…³ç³»ï¼š

        <img src="/Users/breeze/Library/Application Support/typora-user-images/image-20210507195036961.png" alt="image-20210507195036961" style="zoom:50%;" />
    * èšåˆå…³ç³»ï¼š

<img src="/Users/breeze/Library/Application Support/typora-user-images/image-20210507195110733.png" alt="image-20210507195110733" style="zoom:50%;" />

* å¦‚æœæˆ‘ä»¬äººå’ŒMouseï¼ŒMonitorï¼ŒComputeræ˜¯ä¸å¯åˆ†ç¦»çš„ï¼Œå°±å‡çº§ä¸ºç»„åˆå…³ç³»
    * ç»„åˆå…³ç³»ï¼š

<img src="/Users/breeze/Library/Application Support/typora-user-images/image-20210507195141300.png" alt="image-20210507195141300" style="zoom:50%;" />

ä¸‹å›¾ä¸ºComputerä¸èƒ½å’ŒMonitorï¼ŒComputeråˆ†ç¦»

<img src="/Users/breeze/Library/Application Support/typora-user-images/image-20210507195153107.png" alt="image-20210507195153107" style="zoom:50%;" />



------

## ------------------------

## No.1:å•ä¾‹æ¨¡å¼

- æ‰€è°“å•ä¾‹æ¨¡å¼,å°±æ˜¯é‡‡å–ä¸€å®šçš„æ–¹æ³•ä¿è¯åœ¨æ•´ä¸ªè½¯ä»¶ç³»ç»Ÿä¸­,å¯¹æŸä¸ªç±»åªèƒ½å­˜åœ¨ä¸€ä¸ªå¯¹è±¡å®ä¾‹,

  å¹¶ä¸”è¯¥ç±»åªæä¾›ä¸€ä¸ªå–å¾—å…¶å¯¹è±¡å®ä¾‹çš„(é™æ€)æ–¹æ³•

### D1:é¥¿æ±‰å¼(é™æ€å¸¸é‡)

```java
//é¥¿æ±‰å¼(é™æ€å˜é‡)
class Singleton {
	
	//1. æ„é€ å™¨ç§æœ‰åŒ–, å¤–éƒ¨èƒ½new
	private Singleton() {
		
	}
	
	//2.æœ¬ç±»å†…éƒ¨åˆ›å»ºå¯¹è±¡å®ä¾‹
	private final static Singleton instance = new Singleton();
	
	//3. æä¾›ä¸€ä¸ªå…¬æœ‰çš„é™æ€æ–¹æ³•ï¼Œè¿”å›å®ä¾‹å¯¹è±¡
	public static Singleton getInstance() {
			return instance;
	}
	
}
```

- **ä¼˜ç¼ºç‚¹:**
  - **ä¼˜ç‚¹:** å†™æ³•ç®€å•,åœ¨ç±»è£…è½½çš„æ—¶å€™å°±å®Œæˆå®ä¾‹åŒ–,é¿å…äº†çº¿ç¨‹åŒæ­¥é—®é¢˜;
  - **ç¼ºç‚¹:** åœ¨ç±»è£…è½½æ—¶å®Œæˆå®ä¾‹åŒ–,æ²¡æœ‰è¾¾åˆ°æ‡’åŠ è½½çš„æ•ˆæœ,å› æ­¤å¦‚æœä»å§‹è‡³ç»ˆæ²¡æœ‰ä½¿ç”¨è¿™ä¸ªå®ä¾‹,å°±ä¼šé€ æˆå†…å­˜æµªè´¹;
- **ç»“è®º:** è¿™ç§å•ä¾‹æ¨¡å¼å¯ç”¨,ä½†å¯èƒ½ä¼šé€ æˆå†…å­˜æµªè´¹;



### D2: é¥¿æ±‰å¼(é™æ€ä»£ç å—)

```java
class Singleton{

    //æ„é€ å™¨ç§æœ‰åŒ–
    private Singleton(){

    }
		
  	//æœ¬ç±»å†…éƒ¨åˆ›å»ºå¯¹è±¡å®ä¾‹
    private static Singleton instance;
		
  	//åœ¨é™æ€ä»£ç å—ä¸­,åˆ›å»ºå•ä¾‹å¯¹è±¡
    static {
        instance = new Singleton();
    }
		
  	//å‘å¤–ç•Œæä¾›ä¸€ä¸ªè·å–å®ä¾‹å¯¹è±¡çš„æ–¹æ³•
    public static Singleton getInstance(){
        return instance;
    }

}
```

- **ä¼˜ç¼ºç‚¹:** ä¸é™æ€å¸¸é‡çš„ä¸€è‡´
- **ç»“è®º:** ä¸é™æ€å¸¸é‡çš„ä¸€è‡´



### D3: æ‡’æ±‰å¼(çº¿ç¨‹ä¸å®‰å…¨)

```java
class Singleton{

    private static Singleton instance;

    private Singleton(){};
		
  	// ç¬¬ä¸€æ¬¡è°ƒç”¨æ–¹æ³•æ—¶æ‰åˆ›å»ºå®ä¾‹å¯¹è±¡
    public static Singleton getInstance(){
        if(instance == null){
            instance = new Singleton();
        }
        return instance;
    }

}
```

- **ä¼˜ç¼ºç‚¹:**
  - **ä¼˜ç‚¹:** èµ·åˆ°äº†æ‡’åŠ è½½çš„æ•ˆæœ
  - **ç¼ºç‚¹:** åªèƒ½åœ¨å•çº¿ç¨‹ä¸‹ä½¿ç”¨,ä¸€ä¸ªçº¿ç¨‹è¿›å…¥äº†if(instance == null)åˆ¤æ–­è¯­å¥å—,è¿˜æœªæ¥å¾—åŠå‘ä¸‹æ‰§è¡Œ,å¦ä¸€ä¸ªçº¿ç¨‹ä¹Ÿé€šè¿‡äº†è¿™ä¸ªåˆ¤æ–­è¯­å¥,è¿™æ—¶å˜ä¼šäº§ç”Ÿå¤šä¸ªå®ä¾‹
- **ç»“è®º:** å¼€å‘ä¸­ä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼



### D4: æ‡’æ±‰å¼(çº¿ç¨‹å®‰å…¨,åŒæ­¥æ–¹æ³•)

```java
class Singleton{

    private static Singleton instance;

    private Singleton(){};

    //åŠ é”
    public synchronized static Singleton getInstance(){
        if(instance == null){
            instance = new Singleton();
        }
        return instance;
    }

}
```

- **ä¼˜ç¼ºç‚¹:**
  - **ä¼˜ç‚¹:** è§£å†³äº†çº¿ç¨‹å®‰å…¨é—®é¢˜
  - **ç¼ºç‚¹:** æ•ˆç‡ä½ä¸‹,æ¯ä¸ªçº¿ç¨‹åœ¨æƒ³è¦è·å–å®ä¾‹æ—¶,æ‰§è¡ŒgetInstance()æ–¹æ³•éƒ½è¦è¿›è¡ŒåŒæ­¥,è€Œå…¶å®è¿™ä¸ªæ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡å®ä¾‹åŒ–ä»£ç å°±å¤Ÿäº†,åé¢æƒ³è¦è·å–è¯¥å®ä¾‹,ç›´æ¥returnå³å¯
- **ç»“è®º:** åœ¨å®é™…å¼€å‘ä¸­,ä¸æ¨èä½¿ç”¨



### D5: æ‡’æ±‰å¼(çº¿ç¨‹å®‰å…¨,åŒæ­¥ä»£ç å—)

```java
class Singleton {

    private static Singleton instance;

    private Singleton() {
    }
    
    public static Singleton getInstance() {
      
        if (instance == null) {
            synchronized (Singleton.class) {
                instance = new Singleton();
            }
        }
        return instance;
    }
}
```

- è¿™ç§æ–¹å¼æœ¬æ„æ˜¯å¯¹ç¬¬å››ç§æ–¹æ³•çš„æ”¹è¿›,ä½†æ˜¯è¿™ç§åŒæ­¥å¹¶**ä¸èƒ½**èµ·åˆ°çº¿ç¨‹åŒæ­¥çš„ä½œç”¨
- **ç»“è®º:** å®é™…å¼€å‘ä¸­ä¸èƒ½ä½¿ç”¨



### D6: åŒé‡æ£€æŸ¥âœ¨

```java
class Singleton {

    private static volatile Singleton instance;

    private Singleton() {
    }

    public synchronized static Singleton getInstance() {

        if (instance == null) {
            synchronized (Singleton.class) {
                if (instance == null) {
                    instance = new Singleton();
                }
            }
        }
        return instance;
    }

}
```

- åŒé‡æ£€æŸ¥æ˜¯å¤šçº¿ç¨‹å¼€å‘ä¸­å¸¸ç”¨çš„.å¦‚ä»£ç æ‰€ç¤º,æˆ‘ä»¬è¿›è¡Œäº†ä¸¤æ¬¡if(instance  == null)æ£€æŸ¥,è¿™å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨
- **ä¼˜ç‚¹:** çº¿ç¨‹å®‰å…¨; å»¶è¿ŸåŠ è½½; æ•ˆç‡è¾ƒé«˜
- **ç»“è®º:** å®é™…å¼€å‘ä¸­æ¨èä½¿ç”¨



### D7: é™æ€å†…éƒ¨ç±»âœ¨

```java
class Singleton{

    private static volatile Singleton instance;

    private Singleton(){}

    private static class SingletonInstance{
        private static final Singleton INSTANCE = new Singleton();
    }

    public synchronized static Singleton getInstance(){
        return SingletonInstance.INSTANCE;
    }
}
```

- è¿™ç§æ–¹å¼é‡‡ç”¨äº†ç±»è£…è½½çš„æœºåˆ¶æ¥ä¿è¯åˆå§‹åŒ–å®ä¾‹æ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹;
- é™æ€å†…éƒ¨ç±»æ–¹å¼åœ¨Singletonç±»è¢«è£…è½½æ—¶ä¸ä¼šç«‹å³å®ä¾‹åŒ–,è€Œæ˜¯åœ¨éœ€è¦å®ä¾‹åŒ–æ—¶,è°ƒç”¨getInstanceæ–¹æ³•,æ‰ä¼šè£…è½½é™æ€å†…éƒ¨ç±»SingletonInstance,ä»è€Œå®ŒæˆSingletonçš„å®ä¾‹åŒ–;
- **ä¼˜ç‚¹:** çº¿ç¨‹å®‰å…¨; åˆ©ç”¨é™æ€å†…éƒ¨ç±»ç‰¹ç‚¹å®ç°äº†å»¶è¿ŸåŠ è½½,æ•ˆç‡é«˜;
- **ç»“è®º:** æ¨èä½¿ç”¨



### D8: æšä¸¾âœ¨

```java
public class SingletonTest08 {

    public static void main(String[] args) {
        Singleton instance = Singleton.INSTANCE;
        instance.sayOK();
    }

}

enum Singleton{
    INSTANCE;

    public void sayOK(){
        System.out.println("ğŸ™‚");
    }

}
```

- è¿™ç§å€ŸåŠ©JDK1.5ä¸­æ·»åŠ çš„æšä¸¾æ¥å®ç°å•ä¾‹æ¨¡å¼,ä¸ä»…èƒ½é¿å…å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜,è€Œä¸”è¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡;
- è¿™ç§æ–¹å¼æ˜¯Effective Javaä½œè€… Josh Blochæå€¡çš„ 
- **ç»“è®º:** æ¨èä½¿ç”¨



### å•ä¾‹æ¨¡å¼åœ¨JDKä¸­çš„åº”ç”¨:

- â€‹	java.lang.Runtime (é¥¿æ±‰å¼)

  <img src="/Users/breeze/Library/Application Support/typora-user-images/image-20210309150254909.png" alt="image-20210309150254909" style="zoom: 67%;" />



### æ€»ç»“:

- å•ä¾‹æ¨¡å¼ä¿è¯äº†ç³»ç»Ÿå†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡,èŠ‚çœäº†ç³»ç»Ÿèµ„æº;
- å½“æƒ³è¦å®ä¾‹åŒ–ä¸€ä¸ªå•ä¾‹ç±»çš„æ—¶å€™,å¿…é¡»è®°ä½ä½¿ç”¨ç›¸åº”çš„è·å–å¯¹è±¡çš„æ–¹æ³•,è€Œä¸æ˜¯new;
- **ä½¿ç”¨åœºæ™¯:** 
  - éœ€è¦é¢‘ç¹è¿›è¡Œåˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡;
  - åˆ›å»ºå¯¹è±¡è€—æ—¶è¿‡å¤šæˆ–è€…è€—è´¹èµ„æºè¿‡å¤š(å¦‚: é‡é‡çº§å¯¹è±¡),ä½†åˆç»å¸¸ä¼šä½¿ç”¨åˆ°çš„å¯¹è±¡,å·¥å…·ç±»å¯¹è±¡,é¢‘ç¹è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶çš„å¯¹è±¡(å¦‚: æ•°æ®æº,sessionå·¥å‚);



------



### ------------------

## No.2:å·¥å‚æ¨¡å¼

`å…·ä½“éœ€æ±‚:
çœ‹ä¸€ä¸ªæŠ«è¨çš„é¡¹ç›®:è¦ä¾¿äºæŠ«è¨ç§ç±»çš„æ‰©å±•ï¼Œè¦ä¾¿äºç»´æŠ¤ `

`1) æŠ«è¨çš„ç§ç±»å¾ˆå¤š(æ¯”å¦‚ GreekPizzã€CheesePizz ç­‰)
2) æŠ«è¨çš„åˆ¶ä½œæœ‰ prepareï¼Œbake, cut, box
3) å®ŒæˆæŠ«è¨åº—è®¢è´­åŠŸèƒ½ã€‚`

**ä¼ ç»Ÿæ–¹å¼**

```java
/** OrderPizza ç±»
	ç›´æ¥åœ¨è®¢è´­ç±»çš„æ„é€ æ–¹æ³•ä¸­å®Œæˆè®¢è´­
*/ 	

class OrderPizza{
    public OrderPizza() {
      Pizza pizza = null;
      String orderType; // è®¢è´­æŠ«è¨çš„ç±»å‹
      do {
        orderType = getType();
        if (orderType.equals("greek")) {
          pizza = new GreekPizza();
          pizza.setName(" å¸Œè…ŠæŠ«è¨ ");
        } else if (orderType.equals("cheese")) {
          pizza = new CheesePizza();
          pizza.setName(" å¥¶é…ªæŠ«è¨ ");
        } else if (orderType.equals("pepper")) {
          pizza = new PepperPizza();
          pizza.setName("èƒ¡æ¤’æŠ«è¨");
        } else {
          break;
        }
        //è¾“å‡ºpizza åˆ¶ä½œè¿‡ç¨‹
        pizza.prepare();
        pizza.bake();
        pizza.cut();
        pizza.box();

      } while (true);
    }
  }

/** ä¼˜ç¼ºç‚¹
ä¼˜ç‚¹ : æ¯”è¾ƒå¥½ç†è§£ï¼Œç®€å•æ˜“æ“ä½œã€‚
ç¼ºç‚¹ : è¿åäº†è®¾è®¡æ¨¡å¼çš„ocpåŸåˆ™ï¼Œå³å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚å³å½“æˆ‘ä»¬ç»™ç±»å¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œå°½é‡ä¸ä¿®æ”¹ä»£ç ï¼Œæˆ–è€…å°½å¯èƒ½å°‘ä¿®æ”¹ä»£ç .
			 ä¾‹å¦‚æˆ‘ä»¬è¿™æ—¶è¦æ–°å¢åŠ ä¸€ä¸ªPizzaçš„ç§ç±»(PepperæŠ«è¨)æ—¶.
			 
/** æ”¹è¿›æ€è·¯
åˆ†æ:ä¿®æ”¹ä»£ç å¯ä»¥æ¥å—ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨å…¶å®ƒçš„åœ°æ–¹ä¹Ÿæœ‰åˆ›å»ºPizzaçš„ä»£ç ï¼Œå°±æ„å‘³ç€ï¼Œä¹Ÿéœ€è¦ä¿®æ”¹ï¼Œè€Œåˆ›å»ºPizzaçš„ä»£ç ï¼Œå¾€å¾€æœ‰å¤šå¤„ã€‚ æ€è·¯:æŠŠåˆ›å»ºPizzaå¯¹è±¡å°è£…åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬æœ‰æ–°çš„Pizzaç§ç±»æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹è¯¥ç±»å°±å¯ï¼Œå…¶å®ƒæœ‰åˆ›å»ºåˆ°Pizzaå¯¹è±¡çš„ä»£ç å°±ä¸éœ€è¦ä¿®æ”¹äº†.
-> ç®€å•å·¥å‚æ¨¡å¼
```

####  

### D1: ç®€å•å·¥å‚æ¨¡å¼

```java
/** ä»‹ç»
1) ç®€å•å·¥å‚æ¨¡å¼æ˜¯å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œæ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ç§ã€‚ç®€å•å·¥å‚æ¨¡å¼æ˜¯ç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§äº§å“ç±»çš„å®ä¾‹ã€‚ç®€å•å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ¨¡å¼å®¶æ—ä¸­æœ€ç®€å•å®ç”¨çš„æ¨¡å¼
2) ç®€å•å·¥å‚æ¨¡å¼:å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„ç±»ï¼Œç”±è¿™ä¸ªç±»æ¥å°è£…å®ä¾‹åŒ–å¯¹è±¡çš„è¡Œä¸º(ä»£ç )
3) åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œå½“æˆ‘ä»¬ä¼šç”¨åˆ°å¤§é‡çš„åˆ›å»ºæŸç§ã€æŸç±»æˆ–è€…æŸæ‰¹å¯¹è±¡æ—¶ï¼Œå°±ä¼šä½¿ç”¨åˆ°å·¥å‚æ¨¡å¼. */

//å·¥å‚ç±»
public class SimpleFactory {

	//æ›´åŠ orderType è¿”å›å¯¹åº”çš„Pizza å¯¹è±¡
	public Pizza createPizza(String orderType) {

		Pizza pizza = null;

		System.out.println("ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼");
		if (orderType.equals("greek")) {
			pizza = new GreekPizza();
			pizza.setName(" å¸Œè…ŠæŠ«è¨ ");
		} else if (orderType.equals("cheese")) {
			pizza = new CheesePizza();
			pizza.setName(" å¥¶é…ªæŠ«è¨ ");
		} else if (orderType.equals("pepper")) {
			pizza = new PepperPizza();
			pizza.setName("èƒ¡æ¤’æŠ«è¨");
		}
		
		return pizza;
	}
	
	//ç®€å•å·¥å‚æ¨¡å¼ ä¹Ÿå« é™æ€å·¥å‚æ¨¡å¼ 
	public static Pizza createPizza2(String orderType) {

		Pizza pizza = null;

		System.out.println("ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼2");
		if (orderType.equals("greek")) {
			pizza = new GreekPizza();
			pizza.setName(" å¸Œè…ŠæŠ«è¨ ");
		} else if (orderType.equals("cheese")) {
			pizza = new CheesePizza();
			pizza.setName(" å¥¶é…ªæŠ«è¨ ");
		} else if (orderType.equals("pepper")) {
			pizza = new PepperPizza();
			pizza.setName("èƒ¡æ¤’æŠ«è¨");
		}
		
		return pizza;
	}

}



//OrderPizzaç±»
public class OrderPizza {

	//å®šä¹‰ä¸€ä¸ªç®€å•å·¥å‚å¯¹è±¡
	SimpleFactory simpleFactory;
	Pizza pizza = null;
	
	//æ„é€ å™¨
	public OrderPizza(SimpleFactory simpleFactory) {
		setFactory(simpleFactory);
	}
	
	public void setFactory(SimpleFactory simpleFactory) {
		String orderType = ""; //ç”¨æˆ·è¾“å…¥çš„
		
		this.simpleFactory = simpleFactory; //è®¾ç½®ç®€å•å·¥å‚å¯¹è±¡
		
		do {
			orderType = getType(); 
			pizza = this.simpleFactory.createPizza(orderType);
			
			//è¾“å‡ºpizza
			if(pizza != null) { //è®¢è´­æˆåŠŸ
				pizza.prepare();
				pizza.bake();
				pizza.cut();
				pizza.box();
			} else {
				System.out.println(" è®¢è´­æŠ«è¨å¤±è´¥ ");
				break;
			}
		}while(true);
	}
	
	// å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è·å–å®¢æˆ·å¸Œæœ›è®¢è´­çš„æŠ«è¨ç§ç±»
	private String getType() {
		try {
			BufferedReader strin = new BufferedReader(new InputStreamReader(System.in));
			System.out.println("input pizza ç§ç±»:");
			String str = strin.readLine();
			return str;
		} catch (IOException e) {
			e.printStackTrace();
			return "";
		}
	}

}

```



### D2: å·¥å‚æ–¹æ³•æ¨¡å¼

`æŠ«è¨é¡¹ç›®æ–°çš„éœ€æ±‚:`

`å®¢æˆ·åœ¨ç‚¹æŠ«è¨æ—¶ï¼Œå¯ä»¥ç‚¹ä¸åŒå£å‘³çš„æŠ«è¨ï¼Œæ¯”å¦‚ åŒ—äº¬çš„å¥¶é…ªpizzaã€ åŒ—äº¬çš„èƒ¡æ¤’pizza æˆ–è€…æ˜¯ä¼¦æ•¦çš„å¥¶é…ªpizzaã€ä¼¦æ•¦çš„èƒ¡æ¤’pizzaã€‚`

```java
/** æ€è·¯1
		ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼ï¼Œåˆ›å»ºä¸åŒçš„ç®€å•å·¥å‚ç±»ï¼Œæ¯”å¦‚BJPizzaSimpleFactoryã€ LDPizzaSimpleFactory ç­‰ç­‰.ä»å½“å‰è¿™ä¸ªæ¡ˆä¾‹æ¥è¯´ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è€ƒè™‘åˆ°é¡¹ç›®çš„è§„æ¨¡ï¼Œä»¥åŠè½¯ä»¶çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å¹¶ä¸æ˜¯ç‰¹åˆ«å¥½
		æ€è·¯2
		ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ 
		
å·¥å‚æ–¹æ³•æ¨¡å¼è®¾è®¡æ–¹æ¡ˆ:
	  1.å°†æŠ«è¨é¡¹ç›®çš„å®ä¾‹åŒ–åŠŸèƒ½æŠ½è±¡æˆæŠ½è±¡æ–¹æ³•ï¼Œåœ¨ä¸åŒçš„å£å‘³ç‚¹é¤å­ç±»ä¸­å…·ä½“å®ç°ã€‚
    2.å·¥å‚æ–¹æ³•æ¨¡å¼:å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼å°†å¯¹è±¡çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»ã€‚		
		*/



```













### D3: æŠ½è±¡å·¥å‚æ¨¡å¼









## No.3: ä»£ç†æ¨¡å¼

- åœ¨ç›®æ ‡å¯¹è±¡æ–¹æ³•å®ç°çš„åŸºç¡€ä¸Š,æ‰©å±•ç›®æ ‡å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½
- é€šä¿—çš„è®²,ç±»ä¼¼äºæ˜æ˜Ÿçš„ç»çºªäºº,åœ¨æ˜æ˜Ÿæ¼”å‡ºå‰ååšä¸€äº›é¢å¤–çš„äº‹æƒ…



### D1: é™æ€ä»£ç†

- #### p1: æ¦‚è¿°

é™æ€ä»£ç†ä½¿ç”¨å‰,éœ€è¦å®šä¹‰æ¥å£æˆ–è€…çˆ¶ç±»,ç›®æ ‡å¯¹è±¡ä¸ä»£ç†å¯¹è±¡ä¸€èµ·å®ç°ç›¸åŒæ¥å£æˆ–ç»§æ‰¿ç›¸åŒçˆ¶ç±»



- #### p2: ç¤ºä¾‹

`å…·ä½“è¦æ±‚
1) å®šä¹‰ä¸€ä¸ªæ¥å£:ITeacherDao
2) ç›®æ ‡å¯¹è±¡TeacherDAOå®ç°æ¥å£ITeacherDAO
3) ä½¿ç”¨é™æ€ä»£ç†æ–¹å¼,å°±éœ€è¦åœ¨ä»£ç†å¯¹è±¡TeacherDAOProxyä¸­ä¹Ÿå®ç°ITeacherDAO
4) è°ƒç”¨çš„æ—¶å€™é€šè¿‡è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æ¥è°ƒç”¨ç›®æ ‡å¯¹è±¡.
5) ç‰¹åˆ«æé†’:ä»£ç†å¯¹è±¡ä¸ç›®æ ‡å¯¹è±¡è¦å®ç°ç›¸åŒçš„æ¥å£,ç„¶åé€šè¿‡è°ƒç”¨ç›¸åŒçš„æ–¹æ³•æ¥è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•`



- **ITeacherDaoç±»**

```java
package com.atguigu.proxy.staticproxy;


//æ¥å£
public interface ITeacherDao {
	
	void teach(); // æˆè¯¾çš„æ–¹æ³•
}

```

- **TeacherDaoç±»**

```java
package com.atguigu.proxy.staticproxy;

public class TeacherDao implements ITeacherDao {

	@Override
	public void teach() {
		// TODO Auto-generated method stub
		System.out.println(" è€å¸ˆæˆè¯¾ä¸­  ã€‚ã€‚ã€‚ã€‚ã€‚");
	}

}
```

- **TeacherDaoProxyç±»**

```java
package com.atguigu.proxy.staticproxy;

//ä»£ç†å¯¹è±¡,é™æ€ä»£ç†
public class TeacherDaoProxy implements ITeacherDao{
	
	private ITeacherDao target; // ç›®æ ‡å¯¹è±¡ï¼Œé€šè¿‡æ¥å£æ¥èšåˆ
	
	
	//æ„é€ å™¨
	public TeacherDaoProxy(ITeacherDao target) {
		this.target = target;
	}



	@Override
	public void teach() {
		// TODO Auto-generated method stub
		System.out.println("å¼€å§‹ä»£ç†  å®ŒæˆæŸäº›æ“ä½œã€‚ã€‚ã€‚ã€‚ã€‚ ");//æ–¹æ³•
		target.teach();
		System.out.println("æäº¤ã€‚ã€‚ã€‚ã€‚ã€‚");//æ–¹æ³•
	}

}
```

- **Clientç±»**

```java
package com.atguigu.proxy.staticproxy;

public class Client {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		//åˆ›å»ºç›®æ ‡å¯¹è±¡(è¢«ä»£ç†å¯¹è±¡)
		TeacherDao teacherDao = new TeacherDao();
		
		//åˆ›å»ºä»£ç†å¯¹è±¡, åŒæ—¶å°†è¢«ä»£ç†å¯¹è±¡ä¼ é€’ç»™ä»£ç†å¯¹è±¡
		TeacherDaoProxy teacherDaoProxy = new TeacherDaoProxy(teacherDao);
		
		//é€šè¿‡ä»£ç†å¯¹è±¡ï¼Œè°ƒç”¨åˆ°è¢«ä»£ç†å¯¹è±¡çš„æ–¹æ³•
		//å³ï¼šæ‰§è¡Œçš„æ˜¯ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œä»£ç†å¯¹è±¡å†å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³• 
		teacherDaoProxy.teach();
	}

}
```



- #### p3: ä¼˜ç¼ºç‚¹

1) ä¼˜ç‚¹:åœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½å‰æä¸‹, èƒ½é€šè¿‡ä»£ç†å¯¹è±¡å¯¹ç›®æ ‡åŠŸèƒ½æ‰©å±• 

2) ç¼ºç‚¹:å› ä¸ºä»£ç†å¯¹è±¡éœ€è¦ä¸ç›®æ ‡å¯¹è±¡å®ç°ä¸€æ ·çš„æ¥å£,æ‰€ä»¥ä¼šæœ‰å¾ˆå¤šä»£ç†ç±» ,ä¸€æ—¦æ¥å£å¢åŠ æ–¹æ³•,ç›®æ ‡å¯¹è±¡ä¸ä»£ç†å¯¹è±¡éƒ½è¦ç»´æŠ¤



### D2: åŠ¨æ€ä»£ç†

- #### p1: æ¦‚è¿°

1. ä»£ç†å¯¹è±¡ä¸éœ€è¦å®ç°æ¥å£,ä½†æ˜¯ç›®æ ‡å¯¹è±¡ä»éœ€è¦å®ç°æ¥å£,å¦åˆ™ä¸èƒ½ç”¨åŠ¨æ€ä»£ç†
2. ä»£ç†å¯¹è±¡çš„ç”Ÿæˆï¼Œæ˜¯åˆ©ç”¨JDKçš„APIï¼ŒåŠ¨æ€çš„åœ¨å†…å­˜ä¸­æ„å»ºä»£ç†å¯¹è±¡
3. åŠ¨æ€ä»£ç†ä¹Ÿå«ä½œ: JDKä»£ç†, æ¥å£ä»£ç†



- #### p2: JDKä¸­ç”Ÿæˆä»£ç†å¯¹è±¡çš„API

1. ä»£ç†ç±»æ‰€åœ¨åŒ…: java.lang.reflect.Proxy
2. JDK å®ç°ä»£ç†åªéœ€è¦ä½¿ç”¨ newProxyInstance æ–¹æ³•,ä½†æ˜¯è¯¥æ–¹æ³•éœ€è¦æ¥æ”¶ä¸‰ä¸ªå‚æ•°,å®Œæ•´çš„å†™æ³•æ˜¯: static Object newProxyInstance(ClassLoader loader, Class<?>[ ] interfaces,InvocationHandler h )



- #### p3: ç¤ºä¾‹



- **ITeacherDaoç±»**

```java
package com.atguigu.proxy.dynamic;

//æ¥å£
public interface ITeacherDao {

	void teach(); // æˆè¯¾æ–¹æ³•
	void sayHello(String name);
}
```

- **TeacherDaoç±»**

```java
package com.atguigu.proxy.dynamic;

public class TeacherDao implements ITeacherDao {

	@Override
	public void teach() {
		// TODO Auto-generated method stub
		System.out.println(" è€å¸ˆæˆè¯¾ä¸­.... ");
	}

	@Override
	public void sayHello(String name) {
		// TODO Auto-generated method stub
		System.out.println("hello " + name);
	}
	
}
```

- **ProxyFactoryç±»**

```java
package com.atguigu.proxy.dynamic;

import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;

public class ProxyFactory {

	//ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡ , Object
	private Object target;

	//æ„é€ å™¨ ï¼Œ å¯¹target è¿›è¡Œåˆå§‹åŒ–
	public ProxyFactory(Object target) {
		
		this.target = target;
	} 
	
	//ç»™ç›®æ ‡å¯¹è±¡ ç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡
	public Object getProxyInstance() {
		
		//è¯´æ˜
		/*
		 *  public static Object newProxyInstance(ClassLoader loader,
                                          Class<?>[] interfaces,
                                          InvocationHandler h)
                                          
      1. ClassLoader loader ï¼š æŒ‡å®šå½“å‰ç›®æ ‡å¯¹è±¡ä½¿ç”¨çš„ç±»åŠ è½½å™¨, è·å–åŠ è½½å™¨çš„æ–¹æ³•å›ºå®š
      2. Class<?>[] interfaces: ç›®æ ‡å¯¹è±¡å®ç°çš„æ¥å£ç±»å‹ï¼Œä½¿ç”¨æ³›å‹æ–¹æ³•ç¡®è®¤ç±»å‹
      3. InvocationHandler h : äº‹æƒ…å¤„ç†ï¼Œæ‰§è¡Œç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œä¼šè§¦å‘äº‹æƒ…å¤„ç†å™¨æ–¹æ³•, ä¼šæŠŠå½“å‰æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ å…¥
		 */
		return Proxy.newProxyInstance(target.getClass().getClassLoader(), 
				target.getClass().getInterfaces(), 
				new InvocationHandler() {
					
					@Override
					public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
						// TODO Auto-generated method stub
						System.out.println("JDKä»£ç†å¼€å§‹~~");
						//åå°„æœºåˆ¶è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•
						Object returnVal = method.invoke(target, args);
						System.out.println("JDKä»£ç†æäº¤");
						return returnVal;
					}
				}); 
	}
		
}
```

- **Clientç±»**

```java
package com.atguigu.proxy.dynamic;

public class Client {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		//åˆ›å»ºç›®æ ‡å¯¹è±¡
		ITeacherDao target = new TeacherDao();
		
		//ç»™ç›®æ ‡å¯¹è±¡ï¼Œåˆ›å»ºä»£ç†å¯¹è±¡, å¯ä»¥è½¬æˆ ITeacherDao
		ITeacherDao proxyInstance = (ITeacherDao)new ProxyFactory(target).getProxyInstance();
	
		// proxyInstance=class com.sun.proxy.$Proxy0 å†…å­˜ä¸­åŠ¨æ€ç”Ÿæˆäº†ä»£ç†å¯¹è±¡
		System.out.println("proxyInstance=" + proxyInstance.getClass());
		
		//é€šè¿‡ä»£ç†å¯¹è±¡ï¼Œè°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•
		//proxyInstance.teach();
		
		proxyInstance.sayHello(" tom ");
	}

}
```





### D3: cglibä»£ç†

- #### p1: æ¦‚è¿°

1. é™æ€ä»£ç†å’ŒJDKä»£ç†æ¨¡å¼éƒ½è¦æ±‚ç›®æ ‡å¯¹è±¡æ˜¯å®ç°ä¸€ä¸ªæ¥å£,ä½†æ˜¯æœ‰æ—¶å€™ç›®æ ‡å¯¹è±¡åªæ˜¯ä¸€ä¸ªå•ç‹¬çš„å¯¹è±¡,å¹¶æ²¡æœ‰å®ç°ä»»ä½•çš„æ¥å£,è¿™ä¸ªæ—¶å€™å¯**ä½¿ç”¨ç›®æ ‡å¯¹è±¡å­ç±»**æ¥å®ç°ä»£ç†-è¿™å°±æ˜¯ Cglib ä»£ç†
2. cglibä»£ç†ä¹Ÿå«ä½œ: **å­ç±»ä»£ç†**,å®ƒåœ¨å†…å­˜ä¸­æ„å»ºä¸€ä¸ªå­ç±»å¯¹è±¡ä»è€Œå®ç°ç›®æ ‡å¯¹è±¡åŠŸèƒ½æ‰©å±•,æœ‰äº›ä¹¦å°†cglibå½’ç±»ä¸ºåŠ¨æ€ä»£ç†
3. Cglib æ˜¯ä¸€ä¸ªå¼ºå¤§çš„é«˜æ€§èƒ½çš„ä»£ç ç”ŸæˆåŒ…,å®ƒå¯ä»¥åœ¨è¿è¡ŒæœŸæ‰©å±• java ç±»ä¸å®ç° java æ¥å£.å®ƒå¹¿æ³›çš„è¢«è®¸å¤š AOP çš„ æ¡†æ¶ä½¿ç”¨,ä¾‹å¦‚ Spring AOPï¼Œå®ç°æ–¹æ³•æ‹¦æˆª
4. åœ¨AOPç¼–ç¨‹ä¸­å¦‚ä½•é€‰æ‹©ä»£ç†æ¨¡å¼:
   1. ç›®æ ‡å¯¹è±¡éœ€è¦å®ç°æ¥å£ï¼Œç”¨ JDK ä»£ç†
   2. ç›®æ ‡å¯¹è±¡ä¸éœ€è¦å®ç°æ¥å£ï¼Œç”¨ Cglib ä»£ç†
5. Cglib åŒ…çš„åº•å±‚æ˜¯é€šè¿‡ä½¿ç”¨å­—èŠ‚ç å¤„ç†æ¡†æ¶ ASM æ¥è½¬æ¢å­—èŠ‚ç å¹¶ç”Ÿæˆæ–°çš„ç±»



- #### p2: å®ç°æ­¥éª¤

1. å¼•å…¥ç›¸å…³jaråŒ…

   <img src="/Users/breeze/Library/Application Support/typora-user-images/image-20210715152103456.png" alt="image-20210715152103456" style="zoom:50%;float:left" />

2. åœ¨å†…å­˜ä¸­åŠ¨æ€æ„å»ºå­ç±», ä»£ç†çš„ç±»ä¸èƒ½ä¸ºfinal,å¦åˆ™æŠ¥é”™

   java.lang.IllegalArgumentException:

3. ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•å¦‚æœä¸ºfinal/static,é‚£ä¹ˆå°±ä¸ä¼šè¢«æ‹¦æˆª,å³ä¸ä¼šæ‰§è¡Œç›®æ ‡å¯¹è±¡é¢å¤–çš„ä¸šåŠ¡æ–¹æ³•.



- #### p3: ç¤ºä¾‹

- **TeacherDaoç±»**

```java
package com.atguigu.proxy.cglib;

public class TeacherDao {

	public String teach() {
		System.out.println(" è€å¸ˆæˆè¯¾ä¸­  ï¼Œ æˆ‘æ˜¯cglibä»£ç†ï¼Œä¸éœ€è¦å®ç°æ¥å£ ");
		return "hello";
	}
}
```

- **ProxyFactoryç±»**

```java
package com.atguigu.proxy.cglib;

import java.lang.reflect.Method;

import net.sf.cglib.proxy.Enhancer;
import net.sf.cglib.proxy.MethodInterceptor;
import net.sf.cglib.proxy.MethodProxy;

public class ProxyFactory implements MethodInterceptor {

	//ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡
	private Object target;
	
	//æ„é€ å™¨ï¼Œä¼ å…¥ä¸€ä¸ªè¢«ä»£ç†çš„å¯¹è±¡
	public ProxyFactory(Object target) {
		this.target = target;
	}

	//è¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡:  æ˜¯ target å¯¹è±¡çš„ä»£ç†å¯¹è±¡
	public Object getProxyInstance() {
		//1. åˆ›å»ºä¸€ä¸ªå·¥å…·ç±»
		Enhancer enhancer = new Enhancer();
		//2. è®¾ç½®çˆ¶ç±»
		enhancer.setSuperclass(target.getClass());
		//3. è®¾ç½®å›è°ƒå‡½æ•°
		enhancer.setCallback(this);
		//4. åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œå³ä»£ç†å¯¹è±¡
		return enhancer.create();
		
	}
	

	//é‡å†™  intercept æ–¹æ³•ï¼Œä¼šè°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•
	@Override
	public Object intercept(Object arg0, Method method, Object[] args, MethodProxy arg3) throws Throwable {
		// TODO Auto-generated method stub
		System.out.println("Cglibä»£ç†æ¨¡å¼ ~~ å¼€å§‹");
		Object returnVal = method.invoke(target, args);
		System.out.println("Cglibä»£ç†æ¨¡å¼ ~~ æäº¤");
		return returnVal;
	}

}
```

- **Clientç±»**

```java
package com.atguigu.proxy.cglib;

public class Client {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		//åˆ›å»ºç›®æ ‡å¯¹è±¡
		TeacherDao target = new TeacherDao();
		//è·å–åˆ°ä»£ç†å¯¹è±¡ï¼Œå¹¶ä¸”å°†ç›®æ ‡å¯¹è±¡ä¼ é€’ç»™ä»£ç†å¯¹è±¡
		TeacherDao proxyInstance = (TeacherDao)new ProxyFactory(target).getProxyInstance();

		//æ‰§è¡Œä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œè§¦å‘intecept æ–¹æ³•ï¼Œä»è€Œå®ç° å¯¹ç›®æ ‡å¯¹è±¡çš„è°ƒç”¨
		String res = proxyInstance.teach();
		System.out.println("res=" + res);
	}

}
```



### D4: å‡ ç§å˜ä½“

1. **é˜²ç«å¢™ä»£ç†** 

   å†…ç½‘é€šè¿‡ä»£ç†ç©¿é€é˜²ç«å¢™ï¼Œå®ç°å¯¹å…¬ç½‘çš„è®¿é—®ã€‚

2. **ç¼“å­˜ä»£ç†**
   æ¯”å¦‚:å½“è¯·æ±‚å›¾ç‰‡æ–‡ä»¶ç­‰èµ„æºæ—¶ï¼Œå…ˆåˆ°ç¼“å­˜ä»£ç†å–ï¼Œå¦‚æœå–åˆ°èµ„æºåˆ™ ok,å¦‚æœå–ä¸åˆ°èµ„æºï¼Œå†åˆ°å…¬ç½‘æˆ–è€…æ•°æ® åº“å–ï¼Œç„¶åç¼“å­˜ã€‚

3. **è¿œç¨‹ä»£ç†** 

   è¿œç¨‹å¯¹è±¡çš„æœ¬åœ°ä»£è¡¨ï¼Œé€šè¿‡å®ƒå¯ä»¥æŠŠè¿œç¨‹å¯¹è±¡å½“æœ¬åœ°å¯¹è±¡æ¥è°ƒç”¨ã€‚è¿œç¨‹ä»£ç†é€šè¿‡ç½‘ç»œå’ŒçœŸæ­£çš„è¿œç¨‹å¯¹è±¡æ²Ÿé€šä¿¡ æ¯ã€‚

4. **åŒæ­¥ä»£ç†**

   ä¸»è¦ä½¿ç”¨åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œå®Œæˆå¤šçº¿ç¨‹é—´åŒæ­¥å·¥ä½œ åŒæ­¥ä»£ç†:ä¸»è¦ä½¿ç”¨åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œå®Œæˆå¤šçº¿ç¨‹é—´åŒæ­¥å·¥ä½œ









## No.4: ç­–ç•¥æ¨¡å¼

